Services:
   MyRest:
     type: MISTRAL_REST_API
     parameters:
         baseUrl: http://localhost:8988
     actions:
         put_service_on_hold:
           parameters:
               url: /tasks/put_service_on_hold
               method: GET

         backup_user_data:
           parameters:
               url: /tasks/backup_user_data
               method: GET

         backup_service_data:
           parameters:
               url: /tasks/backup_service_data
               method: GET

         execute_backup:
           parameters:
               url: /tasks/execute_backup
               method: GET

Workflow:
   tasks:
     put_service_on_hold:
         action: MyRest:put_service_on_hold

     backup_user_data:
         requires: [put_service_on_hold]
         action: MyRest:backup_user_data

     backup_service_data:
        requires: [put_service_on_hold]
        action: MyRest:backup_service_data

     execute_backup:
        requires: [backup_user_data, backup_service_data]
        action: MyRest:execute_backup

   events:
     execute_backup:
        type: periodic
        tasks: execute_backup
        parameters:
            cron-pattern: "*/1 * * * *"
